// ObjectModel v2.6.1 - http://objectmodel.js.org
//MIT License - Sylvain Pollet-Villard

!function(t){var o="Object",c="Array",u="Function",l="conventionForConstant",v="conventionForPrivate",a="definition",h="assertions",p="_description",s="validate",g="_validator",f="test",y="expected",O="received",d="path",b="message",j="errorStack",m="errorCollector",w="unstack",S="prototype",A="constructor",P="default",x="defaults",_="return",E="arguments",i=["pop","push","reverse","shift","sort","splice","unshift"],r=/\n.*object-model(.|\n)*object-model.*/,k="function"==typeof Proxy,F=Object.defineProperty;function N(t,n){return n instanceof t}function C(t){return"function"==typeof t}function M(t){return"object"==typeof t}function T(t){return t&&M(t)&&Object.getPrototypeOf(t)===Object.prototype}function q(t){return Array.prototype.slice.call(t)}function z(t,n){return void 0===n?t:n}function D(t,n,r,e){for(var i in n||{})if(e||n.hasOwnProperty(i))if(r&&T(n[i])){var o={};D(o,t[i],r),D(o,n[i],r),t[i]=o}else t[i]=n[i]}function I(t,n,r,e){F(t,n,{value:r,enumerable:e,writable:!0,configurable:!0})}function J(t,n){Object.setPrototypeOf(t,n[S]),I(t,A,n)}function R(t,n){t[S]=Object.create(n),t[S][A]=t}function U(n,r){if(15<(r=r||[]).length||0<=r.indexOf(n))return"...";if(null==n)return String(n);if("string"==typeof n)return'"'+n+'"';if(N(Z,n))return n.toString(r);if(r=[n].concat(r),C(n))return n.name||n.toString(r);if(N(Array,n))return"["+n.map(function(t){return U(t,r)}).join(", ")+"]";if(n.toString!==Object.prototype.toString)return n.toString();if(n&&M(n)){var e=new Array(r.length).join("\t"),t=Object.keys(n);return"{"+t.map(function(t){return"\n"+e+"\t"+t+": "+U(n[t],r)}).join(",")+(t.length?"\n"+e:"")+"}"}return String(n)}function Z(t){if(T(t))return Z[o](t);var n=function(t){return t=z(n[P],t),n[s](t),t};return B(n,arguments,Z),n}"name"in Function.prototype&&"name"in function(){}||F(Function.prototype,"name",{get:function(){var t=Function.prototype.toString.call(this).match(/\s*function\s+([^\(\s]*)\s*/);return t&&t[1]}}),!Object.setPrototypeOf&&N(Array,{__proto__:[]})&&(Object.setPrototypeOf=function(t,n){return t.__proto__=n,t}),R(Z,Function[S]);var n=Z[S];function B(t,n,r){if(0===n.length)throw new Error("Model definition is required");J(t,r),t[a]=n[0],t[h]=t[h].slice(),I(t,j,[])}function G(n){if(T(n))Object.keys(n).forEach(function(t){n[t]=G(n[t])});else{if(!N(Array,n))return[n];if(1===n.length)return n.concat(void 0,null)}return n}function H(n,r,e,i,o,t){var u=i.indexOf(r);if(-1!==u&&-1!==i.slice(u+1).indexOf(r))return n;if(t&&(n=Q(n,r)),N(Z,r))r[g](n,e,i.concat(r),o);else if(T(r))Object.keys(r).forEach(function(t){H(null!=n?n[t]:void 0,r[t],e?e+"."+t:t,i,o)});else{for(var c=G(r),f=0,a=c.length;f<a;f++)if(K(n,c[f],e,i))return n;var s={};s[y]=r,s[O]=n,s[d]=e,o.push(s)}return n}function K(t,n,r,e){if(null==t)return t===n;if(T(n)||N(Z,n)){var i=[];return H(t,n,r,e,i),!i.length}return N(RegExp,n)?n.test(t):n===Number||n===Date?t[A]===n&&!isNaN(t):t===n||C(n)&&N(n,t)||t[A]===n}function L(t,n,r,e){for(var i=0,o=n[h].length;i<o;i++){var u,c=n[h][i],f=c[p],a=C(f)?f:function(t,n){return'assertion "'+f+'" returned '+U(t)+" for value "+U(n)};try{u=c.call(n,t)}catch(s){u=s}if(!0!==u){var s={};s[b]=a.call(n,u,t),s[y]=c,s[O]=t,s[d]=r,e.push(s)}}}function Q(t,n){if(!t||N(Z,t[A]))return t;for(var r=G(n||[]),e=[],i=0,o=r.length;i<o;i++){var u=r[i];N(Z,u)&&u[f](t)&&e.push(u)}var c=e.length;return 1===c?e[0](t):(1<c&&console.warn("Ambiguous model for value "+U(t)+", could be "+e.join(" or ")),t)}n.toString=function(n){return G(this[a]).map(function(t){return U(t,n)}).join(" or ")},n[h]=[],n[s]=function(t,n){this[g](t,null,[],this[j]),this[w](n)},n[f]=function(t){var n,r=this[m];return this[m]=function(){n=!0},this(t),this[m]=r,!n},n.extend=function(){var n,r,e=q(this[h]),t=q(arguments);N(Z[o],this)?(r={},D(n={},this[a]),D(r,this[S],!1,!0),t.forEach(function(t){N(Z,t)&&D(n,t[a],!0),C(t)&&D(r,t[S],!0,!0),M(t)&&D(n,t,!0,!0)})):n=t.reduce(function(t,n){return t.concat(G(n))},G(this[a])).filter(function(t,n,r){return r.indexOf(t)===n}),t.forEach(function(t){N(Z,t)&&(e=e.concat(t[h]))});var i=new this[A](n);return R(i,this[S]),D(i[S],r),i[h]=e,i[m]=this[m],i},n.assert=function(t,n){return n=n||U(t),I(t,p,n),this[h]=this[h].concat(t),this},n.defaultTo=function(t){return this[P]=t,this},n[m]=function(t){var n=new TypeError(t.map(function(t){return t[b]}).join("\n"));throw n.stack&&(n.stack=n.stack.replace(r,"")),n},Z[l]=function(t){return t.toUpperCase()===t},Z[v]=function(t){return"_"===t[0]},I(n,g,function(t,n,r,e){H(t,this[a],n,r,e),L(t,this,n,e)}),I(n,w,function(t){if(this[j].length){t||(t=this[m]);var n=this[j].map(function(t){if(!t[b]){var n=N(Array,t[y])?t[y]:[t[y]];t[b]="expecting "+(t[d]?t[d]+" to be ":"")+n.map(function(t){return U(t)}).join(" or ")+", got "+(null!=t[O]?(r=t[O],{}.toString.call(r).match(/\s([a-zA-Z]+)/)[1]+" "):"")+U(t[O])}var r;return t});this[j]=[],t.call(this,n)}}),R(Z[o]=function(t){var e=function(t){if(N(e,t))return t;if(!N(e,this))return new e(t);if(!N(Object,t)&&void 0!==t){var n={};n[y]=o,n[O]=t,e[j].push(n)}D(this,t=z(e[P],t),!0);var r=function f(a,s,t,n){if(!T(t))return Q(s,t);var h=N(Object,s)?s:{};var r=Object.create(Object.getPrototypeOf(h));for(var e in h)!h.hasOwnProperty(e)||e in t||(r[e]=h[e]);Object.keys(t).forEach(function(i){var o=n?n+"."+i:i,u=Z[l](i),c=t[i];T(c)||!h[i]||N(Z,h[i][A])||(h[i]=Q(h[i],c)),F(r,i,{get:function(){return f(a,h[i],c,o)},set:function(t){if(u&&void 0!==h[i]){var n={};n[b]="cannot redefine constant "+i,a[j].push(n)}var r=f(a,t,c,o);H(r,c,o,[],a[j]);var e=h[i];h[i]=r,L(s,a,o,a[j]),a[j].length&&(h[i]=e,a[w]())},enumerable:!Z[v](i)})});return r}(e,this,e[a]);return e[s](r),r};return R(e,Object[S]),B(e,arguments,Z[o]),e},n);var e=Z[o][S];e[x]=function(t){return D(this[S],t),this},e.toString=function(t){return U(this[a],t)},I(e,g,function(t,n,r,e){if(M(t))H(t,this[a],n,r,e);else{var i={};i[y]=this,i[O]=t,i[d]=n,e.push(i)}L(t,this,n,e)}),R(Z[c]=function(t){var e=function(n){var r;if(n=z(e[P],n),e[s](n),k)r=new Proxy(n,{get:function(t,n){return n===A?e:0<=i.indexOf(n)?X(t,n,e):t[n]},set:function(t,n,r){Y(t,n,r,e)},getPrototypeOf:function(){return e[S]}});else{for(var t in r=Object.create(Array[S]),n)n.hasOwnProperty(t)&&W(r,n,t,e);F(r,"length",{get:function(){return n.length}}),F(r,"toJSON",{value:function(){return n}}),i.forEach(function(t){I(r,t,X(n,t,e,r))}),J(r,e)}return r};return R(e,Array[S]),B(e,arguments,Z[c]),e},Z[S]);var V=Z[c][S];function W(t,n,r,e){F(t,r,{enumerable:!0,get:function(){return n[r]},set:function(t){Y(n,r,t,e)}})}function X(o,u,c,f){return function(){var t=o.slice();if(Array[S][u].apply(t,arguments),c[s](t),!k)for(var n in t)!t.hasOwnProperty(n)||n in f||W(f,o,n,c);for(var r=Array[S][u].apply(o,arguments),e=0,i=o.length;e<i;e++)o[e]=Q(o[e],c[a]);return r}}function Y(t,n,r,e){var i=c+"["+n+"]";parseInt(n)===+n&&0<=n&&(r=H(r,e[a],i,[],e[j],!0));var o=t.slice();o[n]=r,L(o,e,i,e[j]),e[w](),t[n]=r}V.toString=function(t){return c+" of "+U(this[a],t)},I(V,g,function(t,n,r,e){if(N(Array,t))for(var i=0,o=t.length;i<o;i++)t[i]=H(t[i],this[a],(n||c)+"["+i+"]",r,e,!0);else{var u={};u[y]=this,u[O]=t,u[d]=n,e.push(u)}L(t,this,n,e)}),R(Z[u]=function(){var o=function(e){e=z(o[P],e);var i=o[a],t=function(){var t,r=[];if(D(r,i[x]),D(r,q(arguments)),r.length>i[E].length){var n={};n[y]=U(e)+" to be called with "+i[E].length+" "+E,n[O]=r.length,o[j].push(n)}return i[E].forEach(function(t,n){r[n]=H(r[n],t,E+"["+n+"]",[],o[j],!0)}),L(r,o,E,o[j]),o[j].length||(t=e.apply(this,r),_ in i&&(t=H(t,i[_],_+" value",[],o[j],!0))),o[w](),t};return J(t,o),t};R(o,Function[S]);var t={};return t[E]=q(arguments),B(o,[t],Z[u]),o},Z[S]);var $=Z[u][S];$.toString=function(n){var t=u+"("+this[a][E].map(function(t){return U(t,n)}).join(",")+")";return _ in this[a]&&(t+=" => "+U(this[a][_])),t},$[_]=function(t){return this[a][_]=t,this},$[x]=function(){return this[a][x]=q(arguments),this},I($,g,function(t,n,r,e){if(!C(t)){var i={};i[y]=u,i[O]=t,i[d]=n,e.push(i)}}),t.Model=Z}(this);